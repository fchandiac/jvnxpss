(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3678)}])},3678:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return _}});var t=n(4924),a=n(6042),l=n(9396),o=n(5893),i=n(6886),c=n(135),u=n(913),s=n(3841),d=n(5088),m=n(5819),h=n(6815),x=n(480),f=n(5071),Z=n(3321),g=n(7294),j=n(7415),p=n(5920),v=n(381),b=n.n(v),P=n(1313),k=n(7992);function _(){var e=(0,g.useState)({rut:"",name:"",phone:"",mail:"",gender:"",born:b()().format("YYYY-MM-DD")}),r=e[0],n=e[1],v=(0,g.useState)({name:{err:!1,text:""},rut:{err:!1,text:""},phone:{err:!1,text:""},mail:{err:!1,text:""},gender:{err:!1,text:""},born:{err:!1,text:""},check:{err:!1,text:""}}),_=v[0],Y=v[1],D=(0,g.useState)(!1),F=D[0],z=D[1],M=(0,g.useState)(!0),T=(M[0],M[1],function(e){n((0,l.Z)((0,a.Z)({},r),(0,t.Z)({},e.target.name,e.target.value)))}),w=function(){var e=[],n=C(r.name),t=C(r.rut),o=C(r.gender),i=C(r.phone),c=function(e){var r=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/g,n=null==e.match(r);return{err:n,text:!0===n?"Debe ingresar correo electr\xf3nico v\xe1lido":""}}(r.mail),u=0==F,s=!0===u?"Debe seleccionar la casilla":"";e.push(n,t,o,i,c,u);var d=e.filter((function(e){return!0===e}));return d=0==d.length,Y((0,l.Z)((0,a.Z)({},d),{name:{err:n.err,text:n.text},rut:{err:t.err,text:t.text},gender:{err:o.err,text:o.text},phone:{err:i.err,text:i.text},mail:{err:c.err,text:c.text},check:{err:u,text:s}})),d},N=function(e){Y((0,l.Z)((0,a.Z)({},_),(0,t.Z)({},e.target.name,{err:!1,text:""})))};return(0,o.jsx)(p.Z,{children:(0,o.jsxs)(i.ZP,{container:!0,children:[(0,o.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,o.jsx)(c.Z,{label:"Nombre",name:"name",error:_.name.err,value:r.name,onChange:T,variant:"outlined",size:"small",onFocus:N,helperText:_.name.text,fullWidth:!0})}),(0,o.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,o.jsx)(c.Z,{label:"Rut",name:"rut",value:r.rut,onChange:function(e){e.target.value=P.formatRut(e.target.value),T(e)},variant:"outlined",size:"small",onFocus:N,error:_.rut.err,helperText:_.rut.text,fullWidth:!0})}),(0,o.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,o.jsxs)(u.Z,{fullWidth:!0,size:"small",error:_.gender.err,children:[(0,o.jsx)(s.Z,{children:"Genero"}),(0,o.jsxs)(d.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:r.gender,label:"Genero",name:"gender",onChange:T,onFocus:function(){Y((0,l.Z)((0,a.Z)({},_),{gender:{err:!1,text:""}}))},children:[(0,o.jsx)(m.Z,{value:"M",children:"Masculino"}),(0,o.jsx)(m.Z,{value:"F",children:"Femenino"}),(0,o.jsx)(m.Z,{value:"O",children:"Otro"})]}),(0,o.jsx)(h.Z,{children:_.gender.text})]})}),(0,o.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,o.jsx)(j.$,{label:"Fecha de naciemiento",inputFormat:"DD/MM/YYYY",value:r.born,onChange:function(e){var t=b()(e).format("YYYY-MM-DD");n((0,l.Z)((0,a.Z)({},r),{born:t}))},onFocus:N,renderInput:function(e){return(0,o.jsx)(c.Z,(0,l.Z)((0,a.Z)({},e),{size:"small",fullWidth:!0}))}})}),(0,o.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,o.jsx)(c.Z,{label:"Tel\xe9fono",name:"phone",onChange:T,variant:"outlined",size:"small",onFocus:N,error:_.phone.err,helperText:_.phone.text,fullWidth:!0})}),(0,o.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,o.jsx)(c.Z,{label:"Mail",name:"mail",onChange:T,variant:"outlined",size:"small",onFocus:N,error:_.mail.err,helperText:_.mail.text,fullWidth:!0})}),(0,o.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,o.jsxs)(u.Z,{error:_.check.err,children:[(0,o.jsx)(x.Z,{control:(0,o.jsx)(f.Z,{checked:F,onChange:function(e){z(e.target.checked)}}),label:"Declaro ser habitante de la comuna de Parral."}),(0,o.jsx)(h.Z,{children:_.check.text})]})}),(0,o.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,o.jsx)(Z.Z,{variant:"contained",onClick:function(){!0===w()&&k.create(r.rut,r.name,r.phone,r.mail,r.gender,r.born).then((function(){console.log("SEND")})).catch((function(e){console.log(e)}))},children:"enviar"})})]})})}function C(e){var r=0==e.length;return{err:r,text:!0===r?"Campo requerido":""}}},7992:function(e,r,n){"use strict";n.r(r),n.d(r,{create:function(){return a}});var t="https://joven.karmika.cl/";function a(e,r,n,a,l,o){var i={rut:e,name:r,phone:n,mail:a,gender:l,born:o};return new Promise((function(e,r){fetch(t+"persons/create",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((function(n){n.json().then((function(n){0===n.code?r(n.data):e(n.data)}))})).catch((function(e){r(e)}))}))}},1313:function(e,r,n){"use strict";function t(e){var r=e.replace(/[.-]/g,"");return r=r.replace(/^(\d{1,2})(\d{3})(\d{3})(\w{1})$/,"$1.$2.$3-$4")}n.r(r),n.d(r,{formatRut:function(){return t}})}},function(e){e.O(0,[286,105,774,888,179],(function(){return r=5557,e(e.s=r);var r}));var r=e.O();_N_E=r}]);