(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(3678)}])},3678:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Y}});var t=r(4924),a=r(6042),o=r(9396),i=r(5893),l=r(6886),c=r(135),s=r(4054),u=r(3841),d=r(5945),h=r(5819),m=r(6815),x=r(480),f=r(9368),Z=r(3321),j=r(657),g=r(7645),p=r(6580),v=r(5861),b=r(7294),P=r(7463),C=r(2905),T=r(381),k=r.n(T),_=r(1313),y=r(7992);function Y(){var e=(0,b.useState)(!1),n=e[0],r=e[1],T=(0,b.useState)({rut:"",name:"",phone:"",mail:"",gender:"",born:k()().format("YYYY-MM-DD")}),Y=T[0],O=T[1],w=(0,b.useState)({name:{err:!1,text:""},rut:{err:!1,text:""},phone:{err:!1,text:""},mail:{err:!1,text:""},gender:{err:!1,text:""},born:{err:!1,text:""},check:{err:!1,text:""}}),z=w[0],D=w[1],M=(0,b.useState)(!1),N=M[0],S=M[1],E=function(e){O((0,o.Z)((0,a.Z)({},Y),(0,t.Z)({},e.target.name,e.target.value)))},$=function(){var e=F(Y.name),n=F(Y.rut),r=F(Y.gender),t=F(Y.phone),i=function(e){var n=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/g,r=null==e.match(n);return{err:r,text:!0===r?"Debe ingresar correo electr\xf3nico v\xe1lido":""}}(Y.mail),l=0==N,c=!0===l?"Debe seleccionar la casilla":"",s=0==[e.err,n.err,r.err,t.err,i.err,l].filter((function(e){return 1==e})).length;return D((0,o.Z)((0,a.Z)({},z),{name:{err:e.err,text:e.text},rut:{err:n.err,text:n.text},gender:{err:r.err,text:r.text},phone:{err:t.err,text:t.text},mail:{err:i.err,text:i.text},check:{err:l,text:c}})),s},W=function(e){D((0,o.Z)((0,a.Z)({},z),(0,t.Z)({},e.target.name,{err:!1,text:""})))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.Z,{children:(0,i.jsxs)(l.ZP,{container:!0,children:[(0,i.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,i.jsx)(c.Z,{label:"Nombre",name:"name",error:z.name.err,value:Y.name,onChange:E,variant:"outlined",size:"small",onFocus:W,helperText:z.name.text,fullWidth:!0})}),(0,i.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,i.jsx)(c.Z,{label:"Rut",name:"rut",value:Y.rut,onChange:function(e){e.target.value=_.formatRut(e.target.value),E(e)},variant:"outlined",size:"small",onFocus:W,error:z.rut.err,helperText:z.rut.text,fullWidth:!0})}),(0,i.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,i.jsxs)(s.Z,{fullWidth:!0,size:"small",error:z.gender.err,children:[(0,i.jsx)(u.Z,{children:"Genero"}),(0,i.jsxs)(d.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:Y.gender,label:"Genero",name:"gender",onChange:E,onFocus:function(){D((0,o.Z)((0,a.Z)({},z),{gender:{err:!1,text:""}}))},children:[(0,i.jsx)(h.Z,{value:"M",children:"Masculino"}),(0,i.jsx)(h.Z,{value:"F",children:"Femenino"}),(0,i.jsx)(h.Z,{value:"O",children:"Otro"})]}),(0,i.jsx)(m.Z,{children:z.gender.text})]})}),(0,i.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,i.jsx)(P.$,{label:"Fecha de naciemiento",inputFormat:"DD/MM/YYYY",value:Y.born,onChange:function(e){var n=k()(e).format("YYYY-MM-DD");O((0,o.Z)((0,a.Z)({},Y),{born:n}))},onFocus:W,renderInput:function(e){return(0,i.jsx)(c.Z,(0,o.Z)((0,a.Z)({},e),{size:"small",fullWidth:!0}))}})}),(0,i.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,i.jsx)(c.Z,{label:"Tel\xe9fono",name:"phone",onChange:E,variant:"outlined",size:"small",onFocus:W,error:z.phone.err,helperText:z.phone.text,fullWidth:!0})}),(0,i.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,i.jsx)(c.Z,{label:"Mail",name:"mail",onChange:E,variant:"outlined",size:"small",onFocus:W,error:z.mail.err,helperText:z.mail.text,fullWidth:!0})}),(0,i.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,i.jsxs)(s.Z,{error:z.check.err,children:[(0,i.jsx)(x.Z,{control:(0,i.jsx)(f.Z,{checked:N,onChange:function(e){S(e.target.checked)}}),label:"Declaro ser habitante de la comuna de Parral."}),(0,i.jsx)(m.Z,{children:z.check.text})]})}),(0,i.jsx)(l.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,i.jsx)(Z.Z,{variant:"contained",onClick:function(){console.log($()),!0===$()&&y.create(Y.rut,Y.name,Y.phone,Y.mail,Y.gender,Y.born).then((function(){r(!0)})).catch((function(e){console.log(e),"rut must be unique"==e.errors[0].message&&D((0,o.Z)((0,a.Z)({},z),{rut:{err:!0,text:"El rut ingresado ya fue utilizado"}}))}))},children:"enviar"})})]})}),(0,i.jsxs)(j.Z,{open:n,children:[(0,i.jsx)(g.Z,{children:"Gracias"}),(0,i.jsx)(p.Z,{dividers:!0,children:(0,i.jsx)(v.Z,{gutterBottom:!0,children:"Tus datos se han registrado exitosamente."})})]})]})}function F(e){var n=0==e.length;return{err:n,text:!0===n?"Campo requerido":""}}},7992:function(e,n,r){"use strict";r.r(n),r.d(n,{create:function(){return a},findAll:function(){return o},findOneByRut:function(){return i}});var t="https://joven.karmika.cl/";function a(e,n,r,a,o,i){var l={rut:e,name:n,phone:r,mail:a,gender:o,born:i};return new Promise((function(e,n){fetch(t+"persons/create",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((function(r){r.json().then((function(r){0===r.code?n(r.data):e(r.data)}))})).catch((function(e){n(e)}))}))}function o(){return new Promise((function(e,n){fetch(t+"persons/findAll",{method:"GET",body:JSON.stringify(),headers:{"Content-Type":"application/json"}}).then((function(r){r.json().then((function(r){0===r.code?n(r.data):e(r.data)}))})).catch((function(e){n(e)}))}))}function i(e){var n={rut:e};return new Promise((function(e,r){fetch(t+"persons/findOneByRut",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(n){n.json().then((function(n){0===n.code?r(n.data):e(n.data)}))})).catch((function(e){r(e)}))}))}},1313:function(e,n,r){"use strict";function t(e){var n=e.replace(/[.-]/g,"");return n=n.replace(/^(\d{1,2})(\d{3})(\d{3})(\w{1})$/,"$1.$2.$3-$4")}r.r(n),r.d(n,{formatRut:function(){return t}})}},function(e){e.O(0,[202,930,644,774,888,179],(function(){return n=5557,e(e.s=n);var n}));var n=e.O();_N_E=n}]);